<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ | MagicLink</title>
    <link rel="stylesheet" th:href="@{/css/style.css}"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
<nav class="navbar">
    <div class="nav-container">
        <div class="logo">MagicüîóLink</div>
        <div class="nav-links">
            <a href="/home" class="nav-link">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
            <a href="/links" class="nav-link">–ú–æ–∏ —Å—Å—ã–ª–∫–∏</a>
            <a href="/settings" class="nav-link">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
            <a href="/logout" class="nav-link accent">–í—ã–π—Ç–∏</a>
        </div>
    </div>
</nav>

<div class="container settings-container">
    <div class="settings-header">
        <h1>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ <span class="magic-text">–ø—Ä–æ—Ñ–∏–ª—è</span></h1>
    </div>

    <div class="settings-section">
        <div class="section-header">
            <svg class="section-icon" viewBox="0 0 24 24">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
            <h2>–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
        </div>

        <form th:action="@{/settings/profile}" method="post" class="settings-form">
            <div class="form-group">
                <label>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                <input type="text"
                       name="username"
                       th:value="${user.username}"
                       class="input-field"
                       required>
            </div>

            <div class="form-group">
                <label>–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞</label>
                <input type="email"
                       name="email"
                       th:value="${user.email}"
                       class="input-field with-icon"
                       required>
            </div>

            <div th:if="${profileStatus}" class="error-message" th:text="${profileStatus}"></div>

            <button type="submit" class="magic-button small">
                <span class="button-text">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</span>
                <div class="hover-effect"></div>
            </button>
        </form>
    </div>

    <div class="settings-section">
        <div class="section-header">
            <svg class="section-icon" viewBox="0 0 24 24">
                <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
            </svg>
            <h2>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h2>
        </div>

        <form th:action="@{/settings/password}" method="post" class="settings-form">
            <div class="form-group">
                <label>–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                <input type="password"
                       name="oldPassword"
                       class="input-field"
                       required>
            </div>

            <div class="form-group">
                <label>–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                <input type="password"
                       name="password"
                       class="input-field"
                       required>
            </div>

            <div class="form-group">
                <label>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                <input type="password"
                       name="passwordConfirm"
                       class="input-field"
                       required>
            </div>

            <div th:if="${passwordStatus}" class="error-message" th:text="${passwordStatus}"></div>

            <button type="submit" class="magic-button small">
                <span class="button-text">–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</span>
                <div class="hover-effect"></div>
            </button>
        </form>
    </div>

    <div class="settings-section">
        <div class="section-header">
            <svg class="section-icon" viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
            </svg>
            <h2>–ü–æ–¥–ø–∏—Å–∫–∞</h2>
        </div>

        <div class="subscription-status">
            <div class="status-card" th:if="${user.subscriptionActive}">
                <div class="status-active">
                    <span class="status-icon">‚ú®</span>
                    <div class="status-text">
                        <h3>–ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞</h3>
                        <p>–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è: <span th:text="${user.getShowInSettingsSubscription().getExpiredDate()}"></span></p>
                    </div>
                </div>
                <button class="magic-button outlined small">
                    <span class="button-text">–ü—Ä–æ–¥–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</span>
                </button>
            </div>

            <div class="status-card" th:unless="${user.subscriptionActive}">
                <div class="status-inactive">
                    <span class="status-icon">üîí</span>
                    <div class="status-text">
                        <h3>–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞</h3>
                        <p>–î–æ—Å—Ç—É–ø –∫ –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏—è–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω</p>
                    </div>
                </div>
                <button class="magic-button small">
                    <span class="button-text">–ü—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –ø–æ–¥–ø–∏—Å–∫—É</span>
                    <div class="hover-effect"></div>
                </button>
            </div>
        </div>
    </div>
</div>
</body>
</html>